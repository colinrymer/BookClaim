-# TODO: Pull out looping and form and other stuff because i cant remember the comment now that colin fucked it up
%ul.thumbnails
  - books.each do |book|
    %li.span2
      .thumbnail
        %form{ method: @route["method"], action: "#{@route["action"]}/#{book.id if defined? book.id}" }
          - if book["volumeInfo"]["imageLinks"]
            %img{ src: book["volumeInfo"]["imageLinks"]["thumbnail"], alt: book["volumeInfo"]["title"] }
            %input(type="hidden" name="thumbnail"){ value: book["volumeInfo"]["imageLinks"]["thumbnail"] }
          %h4.title
            = book["volumeInfo"]["title"]
            %input(type="hidden" name="title"){ value: book["volumeInfo"]["title"] }
          .authors
            -if book["volumeInfo"]["authors"]
              = book["volumeInfo"]["authors"].join(", ")
          %input(type="hidden" name="authors"){ value: book["volumeInfo"]["authors"].join(',') }
          %input(type="hidden" name="description"){ value: book["volumeInfo"]["description"] }
          %button.btn.btn-primary(type="submit")
            - if search
              Add
            - elsif authorized?
              Delete
            - else
              Claim`